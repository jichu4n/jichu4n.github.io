<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <title>Season of Code - Linux</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="shortcut icon" href="http://seasonofcode.com/assets/favicon.ico" />
      <link href="http://seasonofcode.com/theme/asciidoc.min.css?0e298cf5" rel="stylesheet" />
    <link href="http://seasonofcode.com/theme/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="http://seasonofcode.com/theme/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
      <link href="http://seasonofcode.com/theme/style.min.css?ddff292a" rel="stylesheet" />
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="http://seasonofcode.com/theme/html5shiv.min.js"></script>
    <script src="http://seasonofcode.com/theme/respond.min.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="http://seasonofcode.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Season of Code Full Atom Feed" />

    <meta name="google-site-verification" content="g_MrQjKfWWKOccQYg--leY8NlSev0om0sy2vrBLYoZU">
    <meta name="google-site-verification" content="_r0m7LYlH2JjDgeTysX9Fv0OzQG1xUEAU6x2uSr9nH8">

    <meta name="msvalidate.01" content="F10D3C66876F50983761BFE53E2B943A4">

  <meta name="robots" content="noindex, follow">
  </head>
  <body id="index" class="archive">
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <nav id="header" class="navbar navbar-fixed-top navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <i class="fa fa-bars fa-lg"></i>
          </button>
          <a class="navbar-brand" href="http://seasonofcode.com">
            season <span class="of">of</span> code
          </a>
        </div>
        <div class="collapse navbar-collapse navbar-right">
          <ul class="nav navbar-nav">
            <li>
              <a href="http://seasonofcode.com/tag/featured.html">Featured</a>
            </li>
            <li id="header-tags-dropdown" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"
                role="button">Tags <i class="fa fa-caret-down"></i></a>
              <ul class="dropdown-menu">
                  <li><a href="http://seasonofcode.com/tag/android.html">Android</a></li>
                  <li><a href="http://seasonofcode.com/tag/c.html">C++</a></li>
                  <li><a href="http://seasonofcode.com/tag/featured.html">Featured</a></li>
                  <li><a href="http://seasonofcode.com/tag/linux.html">Linux</a></li>
                  <li><a href="http://seasonofcode.com/tag/misc.html">Misc</a></li>
                  <li><a href="http://seasonofcode.com/tag/projects.html">Projects</a></li>
                  <li><a href="http://seasonofcode.com/tag/python.html">Python</a></li>
                  <li><a href="http://seasonofcode.com/tag/window-manager.html">Window Manager</a></li>
              </ul>
            </li>
            <li>
              <a href="http://seasonofcode.com/archives.html">Archives</a>
            </li>
            <li><a href="http://seasonofcode.com/pages/about.html">About</a></li>
          </ul>
        </div>
        <!-- /.navbar-collapse -->
      </div>
    </nav>
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-md-8 col-md-offset-2">
    <section id="content" class="content">
        <section class="article content">
<article itemscope itemtype="http://schema.org/Article">
  <header>
    <h2 class="entry-title">
      <a itemprop="name" href="http://seasonofcode.com/posts/debug-trap-and-prompt_command-in-bash.html" rel="bookmark">
      DEBUG trap and PROMPT_COMMAND in Bash
      </a>
    </h2>
    <!--googleoff: snippet-->
    <aside>
      <ul class="article-meta text-muted small">
        <li class="article-author">
          By <span itemprop="author">Chuan Ji</span>
        </li>
        <li class="spacer">|</li>
        <li class="article-date">
        <span itemprop="datePublished" content="2014-06-08T11:50:00-07:00">
          Jun 08, 2014
        </span>
        </li>
        <li class="spacer">|</li>
        <li>
          Tags:
            <a href="http://seasonofcode.com/tag/linux.html">Linux</a>,            <a href="http://seasonofcode.com/tag/featured.html">Featured</a>        </li>
        <li class="spacer">|</li>
        <li class="article-comments-count">
          <a href="http://seasonofcode.com/posts/debug-trap-and-prompt_command-in-bash.html#disqus_thread">Comments</a>
        </li>
      </ul>
    </aside>
    <!--googleon: snippet-->
  </header>

  <div itemprop="articleBody" class="entry-content">
    <div class="sect2">
<h3 id="_the_debug_trap">The DEBUG trap</h3>
<div class="paragraph"><p>The DEBUG trap is an extremely handy feature of Bash. The idea is pretty
straightforward: if you run</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="nb">trap</span> <span class="s2">&quot;echo Hello&quot;</span> DEBUG
</pre></div></div></div>
<div class="paragraph"><p>then Bash will run <code>echo Hello</code> before it executes each subsequent command. For
example:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>~/Scratch $ ls
Hello
file1 file2
~/Scratch $ echo Bye
Hello
Bye</code></pre>
</div></div>
<div class="paragraph"><p>A caveat, however, is that the DEBUG trap is triggered once per <em>simple</em>
command; if you have command lists or control structures, the trap will be
triggered multiple times. For example, using the setup above:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>~/Scratch $ echo 1 &amp;&amp; echo 2; echo 3
Hello
1
Hello
2
Hello
3
~/Scratch $ if [ -e /etc/passwd ]; then echo "/etc/passwd exists"; fi
Hello
Hello
/etc/passwd exists</code></pre>
</div></div>
<div class="paragraph"><p>What if we only want to run a command once per composite command, like the
<a href="http://zsh.sourceforge.net/Doc/Release/Functions.html"><code>preexec</code></a> hook in
<a href="http://en.wikipedia.org/wiki/Z_shell">zsh</a>?</p></div>
<div class="paragraph"><p>Enter <code>PROMPT_COMMAND</code>.</p></div>
</div>
<div class="sect2">
<h3 id="_prompt_command">PROMPT_COMMAND</h3>
<div class="paragraph"><p>The idea behind <code>PROMPT_COMMAND</code> is also very simple: if you run</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="nv">PROMPT_COMMAND</span><span class="o">=</span><span class="s2">&quot;echo Bye&quot;</span>
</pre></div></div></div>
<div class="paragraph"><p>then Bash will execute <code>echo Bye</code> before it prints each subsequent prompt (i.e.,
after it has finished executing the previous command line). For example, using
the setup above:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>~/Scratch $ echo 1; echo 2
Hello
1
Hello
2
Hello
Bye</code></pre>
</div></div>
<div class="paragraph"><p>Note that the DEBUG trap is triggered again for <code>PROMPT_COMMAND</code>, in addition to
the user-supplied commands.</p></div>
</div>
<div class="sect2">
<h3 id="_combining_the_debug_trap_and_code_prompt_command_code">Combining the DEBUG trap and <code>PROMPT_COMMAND</code></h3>
<div class="paragraph"><p>By combining the DEBUG trap and <code>PROMPT_COMMAND</code>, we can now hack Bash to
run some code right before and right after executing a full command. For
example, try adding this to your <code>~/.bashrc</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c"># This will run before any command is executed.</span>
<span class="k">function</span> PreCommand<span class="o">()</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$AT_PROMPT</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="k">return</span>
  <span class="k">fi</span>
  <span class="nb">unset </span>AT_PROMPT

  <span class="c"># Do stuff.</span>
  <span class="nb">echo</span> <span class="s2">&quot;Running PreCommand&quot;</span>
<span class="o">}</span>
<span class="nb">trap</span> <span class="s2">&quot;PreCommand&quot;</span> DEBUG

<span class="c"># This will run after the execution of the previous full command line.  We don&#39;t</span>
<span class="c"># want it PostCommand to execute when first starting a bash session (i.e., at</span>
<span class="c"># the first prompt).</span>
<span class="nv">FIRST_PROMPT</span><span class="o">=</span>1
<span class="k">function</span> PostCommand<span class="o">()</span> <span class="o">{</span>
  <span class="nv">AT_PROMPT</span><span class="o">=</span>1

  <span class="k">if</span> <span class="o">[</span> -n <span class="s2">&quot;</span><span class="nv">$FIRST_PROMPT</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">unset </span>FIRST_PROMPT
    <span class="k">return</span>
  <span class="k">fi</span>

  <span class="c"># Do stuff.</span>
  <span class="nb">echo</span> <span class="s2">&quot;Running PostCommand&quot;</span>
<span class="o">}</span>
<span class="nv">PROMPT_COMMAND</span><span class="o">=</span><span class="s2">&quot;PostCommand&quot;</span>
</pre></div></div></div>
<div class="paragraph"><p>The result:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>~/Scratch $ echo 1; echo 2 &amp;&amp; echo 3
Running PreCommand
1
2
3
Running PostCommand</code></pre>
</div></div>
<div class="paragraph"><p>This gives rise to some neat applications, such as
<a href="https://github.com/jichuan89/bash-command-timer">a command timer script</a> I wrote that
prints out the execution time of each command: <div align="center"><img
src="/assets/files/bash_command_timer_screenshot.gif" style="max-width: 657px;
width: 100%"></div>
Please feel free to
<a href="https://github.com/jichuan89/bash-command-timer">check it out on GitHub</a> :)</p></div>
<div class="paragraph"><p>Happy Bash hacking!</p></div>
</div>

  </div>

  <footer class="article-info text-muted small">
    <ul class="article-meta text-right">
      <li class="article-author">
        By Chuan Ji
      </li>
      <li class="spacer">|</li>
      <li class="article-date">
        Jun 08, 2014
      </li>
      <li class="spacer">|</li>
      <li>
        Tags:
          <a href="http://seasonofcode.com/tag/linux.html">Linux</a>,          <a href="http://seasonofcode.com/tag/featured.html">Featured</a>      </li>
      <li class="spacer">|</li>
      <li class="article-comments-count">
        <a href="http://seasonofcode.com/posts/debug-trap-and-prompt_command-in-bash.html#disqus_thread">Comments</a>
      </li>
      <li class="spacer">|</li>
      <li class="article-link">
        <a href="http://seasonofcode.com/posts/debug-trap-and-prompt_command-in-bash.html">Permalink</a>
      </li>
    </ul>
  </footer>
</article>        </section>
        <div class="article-divider">
          <span class="bullet_1">&bull;</span>
          <span class="bullet_2">&bull;</span>
          <span class="bullet_3">&bull;</span>
          <span class="bullet_4">&bull;</span>
          <span class="bullet_5">&bull;</span>
        </div>
        <section class="article content">
<article itemscope itemtype="http://schema.org/Article">
  <header>
    <h2 class="entry-title">
      <a itemprop="name" href="http://seasonofcode.com/posts/how-to-set-default-fonts-and-font-aliases-on-linux.html" rel="bookmark">
      How To Set Default Fonts and Font Aliases on Linux
      </a>
    </h2>
    <!--googleoff: snippet-->
    <aside>
      <ul class="article-meta text-muted small">
        <li class="article-author">
          By <span itemprop="author">Chuan Ji</span>
        </li>
        <li class="spacer">|</li>
        <li class="article-date">
        <span itemprop="datePublished" content="2014-02-22T01:32:00-08:00">
          Feb 22, 2014
        </span>
        </li>
        <li class="spacer">|</li>
        <li>
          Tags:
            <a href="http://seasonofcode.com/tag/linux.html">Linux</a>        </li>
        <li class="spacer">|</li>
        <li class="article-comments-count">
          <a href="http://seasonofcode.com/posts/how-to-set-default-fonts-and-font-aliases-on-linux.html#disqus_thread">Comments</a>
        </li>
      </ul>
    </aside>
    <!--googleon: snippet-->
  </header>

  <div itemprop="articleBody" class="entry-content">
    <div class="sect3">
<h4 id="_font_woes">Font Woes</h4>
<div class="paragraph"><p>It&#8217;s fairly straightforward to set the default font used in native apps on a
modern Linux desktop, or the default fonts used to render web pages in your
browser of choice.</p></div>
<div class="paragraph"><p>But if you&#8217;re reading this, you probably know that that&#8217;s far from the end of
the story. You might have noticed that Firefox and Chrome rudely ignore your
font settings for many websites. This is because many (if not most) popular
sites, including <a href="http://www.google.com">Google</a>, <a href="http://www.yahoo.com">Yahoo</a>,
<a href="http://www.facebook.com">Facebook</a> or <a href="http://github.com">GitHub</a>, specify
preferred fonts for text:</p></div>
<div class="tableblock">
<table rules="none"
style="margin-left:auto; margin-right:auto;"
width="80%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<thead>
<tr>
<th align="left" valign="top"> Site                  </th>
<th align="left" valign="top"> Font Specification</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">Google</p></td>
<td align="left" valign="top"><p class="table"><code>arial, sans-serif</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Yahoo</p></td>
<td align="left" valign="top"><p class="table"><code>Helvetica Neue, Helvetica, Arial</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Facebook</p></td>
<td align="left" valign="top"><p class="table"><code>lucida grande, tahoma, verdana, arial, sans-serif</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">GitHub</p></td>
<td align="left" valign="top"><p class="table"><code>Helvetica, arial, freesans, clean, sans-serif</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>(Retrieved on 02/21/2014)</p></div>
<div class="paragraph"><p>You might immediately notice that the most commonly used fonts on these sites,
Arial and Helvetica, are fonts that come bundled with Microsoft Windows, and are
most likely <em>not</em> installed on your Linux system. In this case, what font is
<em>actually</em> used is anyone&#8217;s guess. If they <em>are</em> installed (e.g., via a package
like <a href="https://aur.archlinux.org/packages/ttf-ms-fonts/">ttf-ms-fonts</a> or directly
copied from a Windows machine), well, you still probably want to display your
favorite font instead :)</p></div>
<div class="paragraph"><p>So, let&#8217;s find out what your default fonts and aliases are with <code>fc-match</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">for</span> family in serif sans-serif monospace Arial Helvetica Verdana <span class="s2">&quot;Times New Roman&quot;</span> <span class="s2">&quot;Courier New&quot;</span><span class="p">;</span> <span class="k">do</span>
  <span class="nb">echo</span> -n <span class="s2">&quot;</span><span class="nv">$family</span><span class="s2">: &quot;</span>
  <span class="nb">fc</span>-match <span class="s2">&quot;</span><span class="nv">$family</span><span class="s2">&quot;</span>
<span class="k">done</span>
</pre></div></div></div>
<div class="paragraph"><p>This is what I get on my machine by default:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>serif: DejaVuSerif.ttf: "DejaVu Serif" "Book"
sans-serif: DejaVuSans.ttf: "DejaVu Sans" "Book"
monospace: DejaVuSansMono.ttf: "DejaVu Sans Mono" "Book"
Arial: DejaVuSans.ttf: "DejaVu Sans" "Book"
Helvetica: n019003l.pfb: "Nimbus Sans L" "Regular"
Verdana: DejaVuSans.ttf: "DejaVu Sans" "Book"
Times New Roman: DejaVuSerif.ttf: "DejaVu Serif" "Book"
Courier New: DejaVuSansMono.ttf: "DejaVu Sans Mono" "Book"</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_font_configuration_files">Font Configuration Files</h4>
<div class="paragraph"><p>So, assuming you&#8217;ve installed your fonts of choice (via a package, copying to
<code>/usr/share/fonts</code> or <code>~/.fonts</code> - please verify with the <code>fc-list</code> command),
how do you set them as default in all apps and web sites?</p></div>
<div class="paragraph"><p>Well, there are two places where fonts are configured: system-wide configuration
resides in <code>/etc/fonts/</code>, and per-user configs are stored in
<code>~/.config/fontconfig/fonts.conf</code> (note that this used to be <code>~/.fonts.conf</code>
before <code>fontconfig</code> 2.10.1). For simplicity&#8217;s sake, we&#8217;ll do it in
<code>~/.config/fontconfig/fonts.conf</code>.</p></div>
<div class="paragraph"><p>Let&#8217;s open up <code>~/.config/fontconfig/fonts.conf</code>, or create it if it doesn&#8217;t
already exist. Put the following skeleton structure in there:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="cp">&lt;?xml version=&#39;1.0&#39;?&gt;</span>
<span class="cp">&lt;!DOCTYPE fontconfig SYSTEM &#39;fonts.dtd&#39;&gt;</span>
<span class="nt">&lt;fontconfig&gt;</span>
<span class="nt">&lt;/fontconfig&gt;</span>
</pre></div></div></div>
<div class="paragraph"><p>We will put all of our custom configuration between <code>&lt;fontconfig&gt;</code> and
<code>&lt;/fontconfig&gt;</code>.</p></div>
</div>
<div class="sect3">
<h4 id="_setting_default_fonts">Setting Default Fonts</h4>
<div class="paragraph"><p>First, let&#8217;s set the default serif, sans serif, and monospace fonts. I&#8217;ll use
the beautiful <a href="http://en.wikipedia.org/wiki/Croscore_fonts">Chrome OS fonts</a> as an
example
(<a href="https://aur.archlinux.org/packages/ttf-chromeos-fonts/"><code>ttf-chromeos-fonts</code></a> if
you&#8217;re running <a href="http://www.archlinux.org">Arch Linux</a>). Insert the following
between <code>&lt;fontconfig&gt;</code> and <code>&lt;/fontconfig&gt;</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre>  <span class="c">&lt;!-- Set preferred serif, sans serif, and monospace fonts. --&gt;</span>
  <span class="nt">&lt;alias&gt;</span>
    <span class="nt">&lt;family&gt;</span>serif<span class="nt">&lt;/family&gt;</span>
    <span class="nt">&lt;prefer&gt;&lt;family&gt;</span>Tinos<span class="nt">&lt;/family&gt;&lt;/prefer&gt;</span>
  <span class="nt">&lt;/alias&gt;</span>
  <span class="nt">&lt;alias&gt;</span>
    <span class="nt">&lt;family&gt;</span>sans-serif<span class="nt">&lt;/family&gt;</span>
    <span class="nt">&lt;prefer&gt;&lt;family&gt;</span>Arimo<span class="nt">&lt;/family&gt;&lt;/prefer&gt;</span>
  <span class="nt">&lt;/alias&gt;</span>
  <span class="nt">&lt;alias&gt;</span>
    <span class="nt">&lt;family&gt;</span>sans<span class="nt">&lt;/family&gt;</span>
    <span class="nt">&lt;prefer&gt;&lt;family&gt;</span>Arimo<span class="nt">&lt;/family&gt;&lt;/prefer&gt;</span>
  <span class="nt">&lt;/alias&gt;</span>
  <span class="nt">&lt;alias&gt;</span>
    <span class="nt">&lt;family&gt;</span>monospace<span class="nt">&lt;/family&gt;</span>
    <span class="nt">&lt;prefer&gt;&lt;family&gt;</span>Cousine<span class="nt">&lt;/family&gt;&lt;/prefer&gt;</span>
  <span class="nt">&lt;/alias&gt;</span>
</pre></div></div></div>
</div>
<div class="sect3">
<h4 id="_aliasing_microsoft_fonts">Aliasing Microsoft Fonts</h4>
<div class="paragraph"><p>Now, we will create aliases for commonly used fonts like Arial and Helvetica, so
that our favorite fonts will always be used instead of these fonts, e.g. when
requested by a web site.</p></div>
<div class="paragraph"><p>Insert the following between <code>&lt;fontconfig&gt;</code> and <code>&lt;/fontconfig&gt;</code>, after the
previous snippet:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre>  <span class="c">&lt;!-- Aliases for commonly used MS fonts. --&gt;</span>
  <span class="nt">&lt;match&gt;</span>
    <span class="nt">&lt;test</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span><span class="nt">&gt;&lt;string&gt;</span>Arial<span class="nt">&lt;/string&gt;&lt;/test&gt;</span>
    <span class="nt">&lt;edit</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span> <span class="na">mode=</span><span class="s">&quot;assign&quot;</span> <span class="na">binding=</span><span class="s">&quot;strong&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;string&gt;</span>Arimo<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;/edit&gt;</span>
  <span class="nt">&lt;/match&gt;</span>
  <span class="nt">&lt;match&gt;</span>
    <span class="nt">&lt;test</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span><span class="nt">&gt;&lt;string&gt;</span>Helvetica<span class="nt">&lt;/string&gt;&lt;/test&gt;</span>
    <span class="nt">&lt;edit</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span> <span class="na">mode=</span><span class="s">&quot;assign&quot;</span> <span class="na">binding=</span><span class="s">&quot;strong&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;string&gt;</span>Arimo<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;/edit&gt;</span>
  <span class="nt">&lt;/match&gt;</span>
  <span class="nt">&lt;match&gt;</span>
    <span class="nt">&lt;test</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span><span class="nt">&gt;&lt;string&gt;</span>Verdana<span class="nt">&lt;/string&gt;&lt;/test&gt;</span>
    <span class="nt">&lt;edit</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span> <span class="na">mode=</span><span class="s">&quot;assign&quot;</span> <span class="na">binding=</span><span class="s">&quot;strong&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;string&gt;</span>Arimo<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;/edit&gt;</span>
  <span class="nt">&lt;/match&gt;</span>
  <span class="nt">&lt;match&gt;</span>
    <span class="nt">&lt;test</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span><span class="nt">&gt;&lt;string&gt;</span>Tahoma<span class="nt">&lt;/string&gt;&lt;/test&gt;</span>
    <span class="nt">&lt;edit</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span> <span class="na">mode=</span><span class="s">&quot;assign&quot;</span> <span class="na">binding=</span><span class="s">&quot;strong&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;string&gt;</span>Arimo<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;/edit&gt;</span>
  <span class="nt">&lt;/match&gt;</span>
  <span class="nt">&lt;match&gt;</span>
    <span class="c">&lt;!-- Insert joke here --&gt;</span>
    <span class="nt">&lt;test</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span><span class="nt">&gt;&lt;string&gt;</span>Comic Sans MS<span class="nt">&lt;/string&gt;&lt;/test&gt;</span>
    <span class="nt">&lt;edit</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span> <span class="na">mode=</span><span class="s">&quot;assign&quot;</span> <span class="na">binding=</span><span class="s">&quot;strong&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;string&gt;</span>Arimo<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;/edit&gt;</span>
  <span class="nt">&lt;/match&gt;</span>
  <span class="nt">&lt;match&gt;</span>
    <span class="nt">&lt;test</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span><span class="nt">&gt;&lt;string&gt;</span>Times New Roman<span class="nt">&lt;/string&gt;&lt;/test&gt;</span>
    <span class="nt">&lt;edit</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span> <span class="na">mode=</span><span class="s">&quot;assign&quot;</span> <span class="na">binding=</span><span class="s">&quot;strong&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;string&gt;</span>Tinos<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;/edit&gt;</span>
  <span class="nt">&lt;/match&gt;</span>
  <span class="nt">&lt;match&gt;</span>
    <span class="nt">&lt;test</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span><span class="nt">&gt;&lt;string&gt;</span>Times<span class="nt">&lt;/string&gt;&lt;/test&gt;</span>
    <span class="nt">&lt;edit</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span> <span class="na">mode=</span><span class="s">&quot;assign&quot;</span> <span class="na">binding=</span><span class="s">&quot;strong&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;string&gt;</span>Tinos<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;/edit&gt;</span>
  <span class="nt">&lt;/match&gt;</span>
  <span class="nt">&lt;match&gt;</span>
    <span class="nt">&lt;test</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span><span class="nt">&gt;&lt;string&gt;</span>Courier New<span class="nt">&lt;/string&gt;&lt;/test&gt;</span>
    <span class="nt">&lt;edit</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span> <span class="na">mode=</span><span class="s">&quot;assign&quot;</span> <span class="na">binding=</span><span class="s">&quot;strong&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;string&gt;</span>Cousine<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;/edit&gt;</span>
  <span class="nt">&lt;/match&gt;</span>
</pre></div></div></div>
<div class="paragraph"><p>Note that the Microsoft fonts are aliased directly to the our preferred
substitute fonts. Aliasing to generic families (serif, sans-serif etc.) may or
may not work depending on your configuration in <code>/etc/fonts</code> (they didn&#8217;t work
for me), so it&#8217;s safer this way.</p></div>
<div class="paragraph"><p>This list is of course by no means definitive; add/remove aliases as you like.</p></div>
</div>
<div class="sect3">
<h4 id="_the_result">The Result</h4>
<div class="paragraph"><p>You&#8217;ll need to log out and back in for all applications to update. You should
see the difference immediately:</p></div>
<div class="paragraph"><div class="title">Google search results, before (Arial):</div><p><span class="image">
<img src="/assets/files/font_config_before.png" alt="/assets/files/font_config_before.png" width="500" />
</span></p></div>
<div class="paragraph"><div class="title">Google search results, after (Arimo):</div><p><span class="image">
<img src="/assets/files/font_config_after.png" alt="/assets/files/font_config_after.png" width="500" />
</span></p></div>
<div class="paragraph"><p>You can verify that the aliases have been set up correctly with <code>fc-match</code>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="k">for</span> family in serif sans-serif monospace Arial Helvetica Verdana <span class="s2">&quot;Times New Roman&quot;</span> <span class="s2">&quot;Courier New&quot;</span><span class="p">;</span> <span class="k">do</span>
  <span class="nb">echo</span> -n <span class="s2">&quot;</span><span class="nv">$family</span><span class="s2">: &quot;</span>
  <span class="nb">fc</span>-match <span class="s2">&quot;</span><span class="nv">$family</span><span class="s2">&quot;</span>
<span class="k">done</span>
</pre></div></div></div>
<div class="paragraph"><p>which should now give you something like:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>serif: Tinos-Regular.ttf: "Tinos" "Regular"
sans-serif: Arimo-Regular.ttf: "Arimo" "Regular"
monospace: Cousine-Regular.ttf: "Cousine" "Regular"
Arial: Arimo-Regular.ttf: "Arimo" "Regular"
Helvetica: Arimo-Regular.ttf: "Arimo" "Regular"
Verdana: Arimo-Regular.ttf: "Arimo" "Regular"
Times New Roman: Tinos-Regular.ttf: "Tinos" "Regular"
Courier New: Cousine-Regular.ttf: "Cousine" "Regular"</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_other_notes">Other Notes</h4>
<div class="paragraph"><p>Some existing examples you may find online show the following syntax:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="c">&lt;!-- Deprecated syntax --&gt;</span>
<span class="nt">&lt;match</span> <span class="na">target=</span><span class="s">&quot;pattern&quot;</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;test</span> <span class="na">name=</span><span class="s">&quot;family&quot;</span> <span class="na">qual=</span><span class="s">&quot;any&quot;</span><span class="nt">&gt;&lt;string&gt;</span>Arial<span class="nt">&lt;/string&gt;&lt;/test&gt;</span>
  ...
<span class="nt">&lt;/match&gt;</span>
</pre></div></div></div>
<div class="paragraph"><p>This will produce an error message like</p></div>
<div class="listingblock">
<div class="content">
<pre><code>Fontconfig error: "/home/username/.config/fontconfig/fonts.conf", line 38: invalid attribute 'name'</code></pre>
</div></div>
<div class="paragraph"><p>The fix is to change <code>&lt;match target="pattern" name="family"&gt;</code> to just <code>&lt;match&gt;</code>,
as shown above.</p></div>
</div>

  </div>

  <footer class="article-info text-muted small">
    <ul class="article-meta text-right">
      <li class="article-author">
        By Chuan Ji
      </li>
      <li class="spacer">|</li>
      <li class="article-date">
        Feb 22, 2014
      </li>
      <li class="spacer">|</li>
      <li>
        Tags:
          <a href="http://seasonofcode.com/tag/linux.html">Linux</a>      </li>
      <li class="spacer">|</li>
      <li class="article-comments-count">
        <a href="http://seasonofcode.com/posts/how-to-set-default-fonts-and-font-aliases-on-linux.html#disqus_thread">Comments</a>
      </li>
      <li class="spacer">|</li>
      <li class="article-link">
        <a href="http://seasonofcode.com/posts/how-to-set-default-fonts-and-font-aliases-on-linux.html">Permalink</a>
      </li>
    </ul>
  </footer>
</article>        </section>
        <div class="article-divider">
          <span class="bullet_1">&bull;</span>
          <span class="bullet_2">&bull;</span>
          <span class="bullet_3">&bull;</span>
          <span class="bullet_4">&bull;</span>
          <span class="bullet_5">&bull;</span>
        </div>
        <section class="article content">
<article itemscope itemtype="http://schema.org/Article">
  <header>
    <h2 class="entry-title">
      <a itemprop="name" href="http://seasonofcode.com/posts/shortening-paths-in-the-bash-prompt-with-prompt_dirtrim.html" rel="bookmark">
      Shortening paths in the Bash prompt with PROMPT_DIRTRIM
      </a>
    </h2>
    <!--googleoff: snippet-->
    <aside>
      <ul class="article-meta text-muted small">
        <li class="article-author">
          By <span itemprop="author">Chuan Ji</span>
        </li>
        <li class="spacer">|</li>
        <li class="article-date">
        <span itemprop="datePublished" content="2011-05-10T03:53:53-07:00">
          May 10, 2011
        </span>
        </li>
        <li class="spacer">|</li>
        <li>
          Tags:
            <a href="http://seasonofcode.com/tag/linux.html">Linux</a>,            <a href="http://seasonofcode.com/tag/featured.html">Featured</a>        </li>
        <li class="spacer">|</li>
        <li class="article-comments-count">
          <a href="http://seasonofcode.com/posts/shortening-paths-in-the-bash-prompt-with-prompt_dirtrim.html#disqus_thread">Comments</a>
        </li>
      </ul>
    </aside>
    <!--googleon: snippet-->
  </header>

  <div itemprop="articleBody" class="entry-content">
    <div class="paragraph"><p>Bash 4 introduced a new environment variable called <code>PROMPT_DIRTRIM</code> that allows
the shortening of paths displayed in its prompts (via <code>w</code> in <code>PS1</code>. I added</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span class="nv">PROMPT_DIRTRIM</span><span class="o">=</span>3
</pre></div></div></div>
<div class="paragraph"><p>to my <code>~/.bashrc</code> and whereas Bash used to display this prompt:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[user@host /media/D/Projects/nitdroid/ul/out/target/product/generic/system/framework]$</code></pre>
</div></div>
<div class="paragraph"><p>It now displays</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[user@host .../generic/system/framework]$</code></pre>
</div></div>
<div class="paragraph"><p>which is a huge improvement especially when working with deep directory
structures.</p></div>

  </div>

  <footer class="article-info text-muted small">
    <ul class="article-meta text-right">
      <li class="article-author">
        By Chuan Ji
      </li>
      <li class="spacer">|</li>
      <li class="article-date">
        May 10, 2011
      </li>
      <li class="spacer">|</li>
      <li>
        Tags:
          <a href="http://seasonofcode.com/tag/linux.html">Linux</a>,          <a href="http://seasonofcode.com/tag/featured.html">Featured</a>      </li>
      <li class="spacer">|</li>
      <li class="article-comments-count">
        <a href="http://seasonofcode.com/posts/shortening-paths-in-the-bash-prompt-with-prompt_dirtrim.html#disqus_thread">Comments</a>
      </li>
      <li class="spacer">|</li>
      <li class="article-link">
        <a href="http://seasonofcode.com/posts/shortening-paths-in-the-bash-prompt-with-prompt_dirtrim.html">Permalink</a>
      </li>
    </ul>
  </footer>
</article>        </section>
<div>
  <ul class="pager">
    <!--- <li class="previous disabled"><a>&larr; Previous</a></li> -->
    <!--- <li class="next disabled"><a>Next &rarr;</a></li> -->
  </ul>
</div>
    </section>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <p class="footer-text">&copy; <a href="http://seasonofcode.com">Season of Code</a></p>
      </div>
    </footer>
    <script src="http://seasonofcode.com/theme/jquery.min.js"></script>
    <script src="http://seasonofcode.com/theme/bootstrap/js/bootstrap.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-21264754-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>