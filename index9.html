<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <title>Season of Code</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="shortcut icon" href="https://seasonofcode.com/assets/favicon.ico" />
      <link href="https://seasonofcode.com/theme/asciidoc.min.css?0e298cf5" rel="stylesheet" />
    <link href="https://seasonofcode.com/theme/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://seasonofcode.com/theme/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
      <link href="https://seasonofcode.com/theme/style.min.css?918c51a9" rel="stylesheet" />
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://seasonofcode.com/theme/html5shiv.min.js"></script>
    <script src="https://seasonofcode.com/theme/respond.min.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://seasonofcode.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Season of Code Full Atom Feed" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-21264754-1', 'auto');
  ga('send', 'pageview');

</script>

<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(["setDomains", ["*.seasonofcode.com"]]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//analytics.chu4n.com/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 2]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//analytics.chu4n.com/piwik.php?idsite=2" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->

    <meta name="google-site-verification" content="g_MrQjKfWWKOccQYg--leY8NlSev0om0sy2vrBLYoZU">
    <meta name="google-site-verification" content="_r0m7LYlH2JjDgeTysX9Fv0OzQG1xUEAU6x2uSr9nH8">

    <meta name="msvalidate.01" content="F10D3C66876F50983761BFE53E2B943A4">

  <meta name="robots" content="noindex, follow">
  </head>
  <body id="index" class="archive">
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <nav id="header" class="navbar navbar-fixed-top navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <i class="fa fa-bars fa-lg"></i>
          </button>
          <a class="navbar-brand" href="https://seasonofcode.com">
            season <span class="of">of</span> code
          </a>
        </div>
        <div class="collapse navbar-collapse navbar-right">
          <ul class="nav navbar-nav">
            <li>
              <a href="https://seasonofcode.com/tag/featured.html">Featured</a>
            </li>
            <li id="header-tags-dropdown" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"
                role="button">Tags <i class="fa fa-caret-down"></i></a>
              <ul class="dropdown-menu">
                  <li><a href="https://seasonofcode.com/tag/android.html">Android</a></li>
                  <li><a href="https://seasonofcode.com/tag/c.html">C++</a></li>
                  <li><a href="https://seasonofcode.com/tag/featured.html">Featured</a></li>
                  <li><a href="https://seasonofcode.com/tag/linux.html">Linux</a></li>
                  <li><a href="https://seasonofcode.com/tag/misc.html">Misc</a></li>
                  <li><a href="https://seasonofcode.com/tag/projects.html">Projects</a></li>
                  <li><a href="https://seasonofcode.com/tag/python.html">Python</a></li>
                  <li><a href="https://seasonofcode.com/tag/window-manager.html">Window Manager</a></li>
              </ul>
            </li>
            <li>
              <a href="https://seasonofcode.com/archives.html">Archives</a>
            </li>
            <li><a href="https://seasonofcode.com/pages/about.html">About</a></li>
          </ul>
        </div>
        <!-- /.navbar-collapse -->
      </div>
    </nav>
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-md-8 col-md-offset-2">
    <section id="content" class="content">
        <section class="article content">
<article itemscope itemtype="http://schema.org/Article">
  <header>
    <h2 class="entry-title">
      <a itemprop="name" href="https://seasonofcode.com/posts/first-bootable-kernel.html" rel="bookmark">
      First bootable kernel
      </a>
    </h2>
    <!--googleoff: snippet-->
    <aside>
      <ul class="article-meta text-muted small">
        <li class="article-author">
          By <span itemprop="author">Chuan Ji</span>
        </li>
        <li class="spacer">|</li>
        <li class="article-date">
        <span itemprop="datePublished" content="2011-02-13T19:45:22-08:00">
          Feb 13, 2011
        </span>
        </li>
        <li class="spacer">|</li>
        <li>
          Tags:
            <a href="https://seasonofcode.com/tag/projects.html">Projects</a>        </li>
        <li class="spacer">|</li>
        <li class="article-comments-count">
          <a href="https://seasonofcode.com/posts/first-bootable-kernel.html#disqus_thread">Comments</a>
        </li>
      </ul>
    </aside>
    <!--googleon: snippet-->
  </header>

  <div itemprop="articleBody" class="entry-content">
    <div class="paragraph"><div class="title">Maemo userspace running custom Android OMAP 2.6.32.9:</div><p><span class="image">
<a class="image" href="/assets/files/nitdroid/P1030161.JPG">
<img src="/assets/files/nitdroid/P1030161_small.JPG" alt="Maemo userspace running custom Android OMAP 2.6.32.9" width="256" height="192" />
</a>
</span></p></div>
<div class="paragraph"><p>FINALLY - a bootable kernel on top of Android OMAP!! I can&#8217;t even express how relieved &amp; proud I am for figuring this out after all this effort - and I barely slept in between&#8230;</p></div>
<div class="paragraph"><p>Anyway, I figured out two important issues in the past three hours. Firstly, boot messages. I finally got the kernel to display boot messages after copying over the directories <code>drivers/video/omap</code> and <code>drivers/video/omap2</code> from the Gentoo mod; I do not know which one and which file(s) within are actually responsible for this, but that&#8217;s something I&#8217;ll figure out another day.</p></div>
<div class="paragraph"><p>Secondly, with boot messages enabled, I could see the kernel was crashing on something related to the Menelaus driver. I tried enabling <code>CONFIG_BOOT_PRINTK_DELAY</code> in the kernel config so I could see the actual messages before the stack trace flooded the screen, but doing so made it unbootable again. I tried capturing the boot process with my digital camera, but even the latter could not capture the full messages on time. I then tried copying over <code>drivers/i2c</code>, but there were too many compilations errors to fix and I ended up just disabling <code>CONFIG_MENELAUS</code> and <code>CONFIG_MMC_OMAP</code>. And that was the magical touch.</p></div>
<div class="paragraph"><p>So it turns out the Menelaus driver was what was causing the kernel to crash; more specifically, it was the Menelaus initialization routine according to the portions of the kernel messages I could see. My current roadmap is thus</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Starting again from scratch, produce the minimal patch that would allow Android OMAP 2.6.32 to boot. Currently I bluntly copied over basically the entire <code>arch/arm</code> directory and that is undesirable for the simple reason that the resulting patch would contain differences between linux-omap 2.6.33 and linux-omap 2.6.32 and would not be applicable to future Android OMAP versions. I want a patch specific to the N810 so that I could apply it to any future Android OMAP version.
</p>
</li>
<li>
<p>
Fix Menelaus and enable MMC. This could prove problematic as the version of Menelaus in the Gentoo mod appears to rely on the new I2C API in 2.6.33, and the version of Menelaus in 2.6.32 that uses the older I2C API crashes the kernel as I just found out. If I backport the version of Menelaus in the Gentoo mod, I could end up producing 2.6.32-specific patches. But I&#8217;ll figure that out.
</p>
</li>
</ol></div>

  </div>

  <footer class="article-info text-muted small">
    <ul class="article-meta text-right">
      <li class="article-author">
        By Chuan Ji
      </li>
      <li class="spacer">|</li>
      <li class="article-date">
        Feb 13, 2011
      </li>
      <li class="spacer">|</li>
      <li>
        Tags:
          <a href="https://seasonofcode.com/tag/projects.html">Projects</a>      </li>
      <li class="spacer">|</li>
      <li class="article-comments-count">
        <a href="https://seasonofcode.com/posts/first-bootable-kernel.html#disqus_thread">Comments</a>
      </li>
      <li class="spacer">|</li>
      <li class="article-link">
        <a href="https://seasonofcode.com/posts/first-bootable-kernel.html">Permalink</a>
      </li>
    </ul>
  </footer>
</article>        </section>
        <div class="article-divider">
          <span class="bullet_1">&bull;</span>
          <span class="bullet_2">&bull;</span>
          <span class="bullet_3">&bull;</span>
          <span class="bullet_4">&bull;</span>
          <span class="bullet_5">&bull;</span>
        </div>
        <section class="article content">
<article itemscope itemtype="http://schema.org/Article">
  <header>
    <h2 class="entry-title">
      <a itemprop="name" href="https://seasonofcode.com/posts/qemu.html" rel="bookmark">
      QEMU
      </a>
    </h2>
    <!--googleoff: snippet-->
    <aside>
      <ul class="article-meta text-muted small">
        <li class="article-author">
          By <span itemprop="author">Chuan Ji</span>
        </li>
        <li class="spacer">|</li>
        <li class="article-date">
        <span itemprop="datePublished" content="2011-02-12T02:09:25-08:00">
          Feb 12, 2011
        </span>
        </li>
        <li class="spacer">|</li>
        <li>
          Tags:
            <a href="https://seasonofcode.com/tag/projects.html">Projects</a>,            <a href="https://seasonofcode.com/tag/misc.html">Misc</a>        </li>
        <li class="spacer">|</li>
        <li class="article-comments-count">
          <a href="https://seasonofcode.com/posts/qemu.html#disqus_thread">Comments</a>
        </li>
      </ul>
    </aside>
    <!--googleon: snippet-->
  </header>

  <div itemprop="articleBody" class="entry-content">
    <div class="paragraph"><p>Still no luck with the kernel. I decided to try running things on QEMU, which supports emulating the N810, but the binary package in the Arch repositories has a bug (described on <a href="http://patchwork.ozlabs.org/patch/61224/">this page</a>)that needs to be patched. Therefore, a <a href="https://aur.archlinux.org/packages.php?ID=46419">new package</a> is now on AUR.</p></div>
<div class="paragraph"><p>Instructions on emulating an N810 / N800 on QEMU can be found <a href="http://www.rkeene.org/projects/info/wiki/106">here</a> and <a href="http://marcin.juszkiewicz.com.pl/2008/04/11/nokia-n800-emulation/">here</a>.</p></div>
<div class="paragraph"><p>UPDATE (02/12/2011): Whatever I set the R&amp;D flags to, the said method doesn&#8217;t work. All I get is a blank screen. Abandoning.</p></div>

  </div>

  <footer class="article-info text-muted small">
    <ul class="article-meta text-right">
      <li class="article-author">
        By Chuan Ji
      </li>
      <li class="spacer">|</li>
      <li class="article-date">
        Feb 12, 2011
      </li>
      <li class="spacer">|</li>
      <li>
        Tags:
          <a href="https://seasonofcode.com/tag/projects.html">Projects</a>,          <a href="https://seasonofcode.com/tag/misc.html">Misc</a>      </li>
      <li class="spacer">|</li>
      <li class="article-comments-count">
        <a href="https://seasonofcode.com/posts/qemu.html#disqus_thread">Comments</a>
      </li>
      <li class="spacer">|</li>
      <li class="article-link">
        <a href="https://seasonofcode.com/posts/qemu.html">Permalink</a>
      </li>
    </ul>
  </footer>
</article>        </section>
        <div class="article-divider">
          <span class="bullet_1">&bull;</span>
          <span class="bullet_2">&bull;</span>
          <span class="bullet_3">&bull;</span>
          <span class="bullet_4">&bull;</span>
          <span class="bullet_5">&bull;</span>
        </div>
        <section class="article content">
<article itemscope itemtype="http://schema.org/Article">
  <header>
    <h2 class="entry-title">
      <a itemprop="name" href="https://seasonofcode.com/posts/a-new-approach.html" rel="bookmark">
      A new approach
      </a>
    </h2>
    <!--googleoff: snippet-->
    <aside>
      <ul class="article-meta text-muted small">
        <li class="article-author">
          By <span itemprop="author">Chuan Ji</span>
        </li>
        <li class="spacer">|</li>
        <li class="article-date">
        <span itemprop="datePublished" content="2011-02-11T23:34:41-08:00">
          Feb 11, 2011
        </span>
        </li>
        <li class="spacer">|</li>
        <li>
          Tags:
            <a href="https://seasonofcode.com/tag/projects.html">Projects</a>        </li>
        <li class="spacer">|</li>
        <li class="article-comments-count">
          <a href="https://seasonofcode.com/posts/a-new-approach.html#disqus_thread">Comments</a>
        </li>
      </ul>
    </aside>
    <!--googleon: snippet-->
  </header>

  <div itemprop="articleBody" class="entry-content">
    <div class="paragraph"><p>Alright, after collecting my thoughts, I have decided to restart the kernel
porting process based on a new approach. I will start with the Android OMAP
kernel v2.6.32.9 and port the N810-specific parts of the Gentoo kernel mod
v2.6.33.2 over to it. This is because</p></div>
<div class="ulist"><ul>
<li>
<p>
I have tested the Gentoo kernel mod on my N810 and verified that it works.
</p>
</li>
<li>
<p>
The two kernels have similar versions, and there should not be significant
changes in kernel APIs that will require corresponding changes in the code to be
ported.
</p>
</li>
</ul></div>
<div class="paragraph"><p>I first did a diff between the Gentoo mod and the linux-omap tree of
the same version and another diff between the Gentoo mod and the vanilla Linux
tree of the same version, realized that the former diff file was smaller, and
tried to patch the android-omap kernel with it. Unfortunately, there appear to
be many minor and irrelevant differences even in this diff file that caused
various compilation and configuration problems; sometimes the fuzzy approach
taken by patch caused even more problems. Therefore, I have decided that I will
manually patch the individual components required.  The checklist:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>arch/arm/mach-omap2</code> and <code>arch/arm/plat-omap</code>: I am considering, instead of patching individual files, simply copying these two directories over from the Gentoo mod.
</p>
</li>
<li>
<p>
<code>arch/arm/include/asm/setup.h</code>: direct copy from the Gentoo mod.
</p>
</li>
<li>
<p>
<code>arch/arm/configs/n810_defconfig</code>: very few minor changes required, otherwise a direct copy from the Gentoo mod.
</p>
</li>
<li>
<p>
<code>drivers/watchdog/omap_wdt.c</code>: direct copy from the Gentoo mod.
</p>
</li>
<li>
<p>
TSC2005 related files:
</p>
<div class="ulist"><ul>
<li>
<p>
<code>include/linux/spi/tsc2005.h</code>
</p>
</li>
<li>
<p>
<code>drivers/input/touchscreen/tsc2005.c</code>
</p>
</li>
<li>
<p>
<code>drivers/input/touchscreen/{Makefile, Kconfig}</code>
</p>
</li>
</ul></div>
</li>
</ul></div>

  </div>

  <footer class="article-info text-muted small">
    <ul class="article-meta text-right">
      <li class="article-author">
        By Chuan Ji
      </li>
      <li class="spacer">|</li>
      <li class="article-date">
        Feb 11, 2011
      </li>
      <li class="spacer">|</li>
      <li>
        Tags:
          <a href="https://seasonofcode.com/tag/projects.html">Projects</a>      </li>
      <li class="spacer">|</li>
      <li class="article-comments-count">
        <a href="https://seasonofcode.com/posts/a-new-approach.html#disqus_thread">Comments</a>
      </li>
      <li class="spacer">|</li>
      <li class="article-link">
        <a href="https://seasonofcode.com/posts/a-new-approach.html">Permalink</a>
      </li>
    </ul>
  </footer>
</article>        </section>
        <div class="article-divider">
          <span class="bullet_1">&bull;</span>
          <span class="bullet_2">&bull;</span>
          <span class="bullet_3">&bull;</span>
          <span class="bullet_4">&bull;</span>
          <span class="bullet_5">&bull;</span>
        </div>
        <section class="article content">
<article itemscope itemtype="http://schema.org/Article">
  <header>
    <h2 class="entry-title">
      <a itemprop="name" href="https://seasonofcode.com/posts/frustration.html" rel="bookmark">
      Frustration
      </a>
    </h2>
    <!--googleoff: snippet-->
    <aside>
      <ul class="article-meta text-muted small">
        <li class="article-author">
          By <span itemprop="author">Chuan Ji</span>
        </li>
        <li class="spacer">|</li>
        <li class="article-date">
        <span itemprop="datePublished" content="2011-02-11T18:53:40-08:00">
          Feb 11, 2011
        </span>
        </li>
        <li class="spacer">|</li>
        <li>
          Tags:
            <a href="https://seasonofcode.com/tag/projects.html">Projects</a>        </li>
        <li class="spacer">|</li>
        <li class="article-comments-count">
          <a href="https://seasonofcode.com/posts/frustration.html#disqus_thread">Comments</a>
        </li>
      </ul>
    </aside>
    <!--googleon: snippet-->
  </header>

  <div itemprop="articleBody" class="entry-content">
    <div class="paragraph"><p>Still having no luck getting my custom kernels to boot. I&#8217;ve tried dozens of different kernel configuration flags, I&#8217;ve screwed around with different souce trees, and regardless of what I did, every kernel I&#8217;ve built gets stuck at the splash screen where it says NOKIA and then powers off. I found a 2.6.33 kernel a wizard Luke-Jr made for Gentoo <a href="http://forums.internettablettalk.com/showthread.php?p=704672">here</a>, and it&#8217;s the only kernel besides the stock Maemo 2.6.21 that actually boots. The really frustrating thing is that my kernels don&#8217;t generate any output, and it is therefore impossible to figure out what&#8217;s wrong. Luke-Jr&#8217;s 2.6.33 does produce output to the screen, however; I&#8217;ve tried everything from various framebuffer configuration options in the kernel to the <code>loglevel</code> command line argument, but nothing works. I even copied the same config into a patched linux-omap tree and it <em>still</em> doesn&#8217;t work. Looks like there&#8217;s something missing / wrong in the code itself; but I copied over the same <code>board-n8x0.c</code> &amp; friends from the Gentoo kernel&#8230;arrrr&#8230;&#8230;</p></div>

  </div>

  <footer class="article-info text-muted small">
    <ul class="article-meta text-right">
      <li class="article-author">
        By Chuan Ji
      </li>
      <li class="spacer">|</li>
      <li class="article-date">
        Feb 11, 2011
      </li>
      <li class="spacer">|</li>
      <li>
        Tags:
          <a href="https://seasonofcode.com/tag/projects.html">Projects</a>      </li>
      <li class="spacer">|</li>
      <li class="article-comments-count">
        <a href="https://seasonofcode.com/posts/frustration.html#disqus_thread">Comments</a>
      </li>
      <li class="spacer">|</li>
      <li class="article-link">
        <a href="https://seasonofcode.com/posts/frustration.html">Permalink</a>
      </li>
    </ul>
  </footer>
</article>        </section>
        <div class="article-divider">
          <span class="bullet_1">&bull;</span>
          <span class="bullet_2">&bull;</span>
          <span class="bullet_3">&bull;</span>
          <span class="bullet_4">&bull;</span>
          <span class="bullet_5">&bull;</span>
        </div>
        <section class="article content">
<article itemscope itemtype="http://schema.org/Article">
  <header>
    <h2 class="entry-title">
      <a itemprop="name" href="https://seasonofcode.com/posts/merging-n810-device-drivers.html" rel="bookmark">
      Merging N810 device drivers
      </a>
    </h2>
    <!--googleoff: snippet-->
    <aside>
      <ul class="article-meta text-muted small">
        <li class="article-author">
          By <span itemprop="author">Chuan Ji</span>
        </li>
        <li class="spacer">|</li>
        <li class="article-date">
        <span itemprop="datePublished" content="2011-02-10T14:52:52-08:00">
          Feb 10, 2011
        </span>
        </li>
        <li class="spacer">|</li>
        <li>
          Tags:
            <a href="https://seasonofcode.com/tag/projects.html">Projects</a>        </li>
        <li class="spacer">|</li>
        <li class="article-comments-count">
          <a href="https://seasonofcode.com/posts/merging-n810-device-drivers.html#disqus_thread">Comments</a>
        </li>
      </ul>
    </aside>
    <!--googleon: snippet-->
  </header>

  <div itemprop="articleBody" class="entry-content">
    <div class="paragraph"><p>I&#8217;ve begun work on incorporating N810 device drivers into the Android OMAP kernel. I am basically following the list of individual components of the N810 on <a href="http://elinux.org/N800">this page</a> from the eLinux wiki. It took quite a while (~3h) just to make everything compile. Some random notes follow.</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>lm8323</strong>, keyboard driver for the N810: The driver for the lm8323 is included in the stock Android OMAP tree under <code>drivers/input/keyboard</code> as <code>CONFIG_KEYBOARD_LM8323</code> (<code>Device Drivers &#8594; Input device support &#8594; Generic input layer &#8594; Keyboards</code>). It requires <code>CONFIG_I2C</code> (<code>Device Drivers &#8594; I2C support</code>) and <code>CONFIG_LEDS_CLASS</code> (<code>Device Drivers &#8594; LED Support &#8594; LEDS Class Support</code>).
</p>
</li>
<li>
<p>
<strong>tsc2005</strong>, touchscreen driver for the N810: I backported the TSC2005 driver from linux-omap 2.6.37. This was complicated by
</p>
</li>
<li>
<p>
The GPIO API changed sometime in Nov 2008; I had to manually replace the following functions following compilation errors:
</p>
<div class="ulist"><ul>
<li>
<p>
<code>omap_gpio_request(int) &#8594; gpio_request(int, const char *)</code>
</p>
</li>
<li>
<p>
<code>omap_gpio_free(int) &#8594; gpio_free(int)</code>
</p>
</li>
<li>
<p>
<code>omap_get_gpio_datain(int) &#8594; gpio_get_value(int)</code>
</p>
</li>
<li>
<p>
<code>omap_set_gpio_dataout(int, int) &#8594; gpio_set_value(int, int)</code>
</p>
</li>
<li>
<p>
<code>omap_set_gpio_direction(int, int) &#8594; gpio_direction_input(int, int), gpio_direction_output(int, int)</code>
</p>
</li>
</ul></div>
</li>
<li>
<p>
The TSC2005 driver relies on a series of macros, constants and functions in a <code>mux.h</code>; I had to backport most of the functionality from <code>arch/arm/mach-omap2/mux2420.{h,c}</code> in linux-omap 2.6.37. The porting wasn&#8217;t smooth.
</p>
</li>
</ul></div>
<div class="paragraph"><p>I have also have had to manually merge the N810-specific structures and routines
from <code>arch/arm/mach-omap2/board-n810.c</code> in the Maemo source tree into
<code>arch/arm/mach-omap2/board-n8x0.c</code> in the Android OMAP tree. This was
complicated by the fact that the latter contained code for both the N800 and the
N810 and there were conflicts; in the <code>n8x0_ts_set_config</code> function, for
instance, there was no runtime detection of which touch screen, the TSC2301 in
the N800 or the TSC2005 in the N810, needs to be initialized; the code for the
former was compiled in, since tmr&#8217;s patch was just for N800&#8217;s.</p></div>
<div class="paragraph"><p>The result:
<a href="/assets/files/nitdroid/7bc11a1aaba032747343f821600215d4f6180010.diff">this</a>
is the newest diff against the <code>archive/android-omap-2.6.32</code> branch of the
Android OMAP tree (commit 69a7364c16c5aeb246dbb4c4e7696e39841492f5), featuring:</p></div>
<div class="ulist"><ul>
<li>
<p>
TSC2005
</p>
</li>
<li>
<p>
Modified <code>board-n8x0.c</code> with (rudimentary) N810 support
</p>
</li>
<li>
<p>
Now actually compiles.
</p>
</li>
</ul></div>
<div class="paragraph"><p>The <a href="/assets/files/nitdroid/config-20110210">config</a> file.</p></div>

  </div>

  <footer class="article-info text-muted small">
    <ul class="article-meta text-right">
      <li class="article-author">
        By Chuan Ji
      </li>
      <li class="spacer">|</li>
      <li class="article-date">
        Feb 10, 2011
      </li>
      <li class="spacer">|</li>
      <li>
        Tags:
          <a href="https://seasonofcode.com/tag/projects.html">Projects</a>      </li>
      <li class="spacer">|</li>
      <li class="article-comments-count">
        <a href="https://seasonofcode.com/posts/merging-n810-device-drivers.html#disqus_thread">Comments</a>
      </li>
      <li class="spacer">|</li>
      <li class="article-link">
        <a href="https://seasonofcode.com/posts/merging-n810-device-drivers.html">Permalink</a>
      </li>
    </ul>
  </footer>
</article>        </section>
        <div class="article-divider">
          <span class="bullet_1">&bull;</span>
          <span class="bullet_2">&bull;</span>
          <span class="bullet_3">&bull;</span>
          <span class="bullet_4">&bull;</span>
          <span class="bullet_5">&bull;</span>
        </div>
<div>
  <ul class="pager">
    <li class="previous"><a href="https://seasonofcode.com/index8.html">&larr; Previous</a></li>
    <li class="next"><a href="https://seasonofcode.com/index10.html">Next &rarr;</a></li>
  </ul>
</div>
    </section>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <p class="footer-text text-muted">&copy; 2015 Chuan Ji</p>
      </div>
    </footer>
    <script src="https://seasonofcode.com/theme/jquery.min.js"></script>
    <script src="https://seasonofcode.com/theme/bootstrap/js/bootstrap.min.js"></script>

<script type="text/javascript">
  var disqus_shortname = 'cjix';
  (function () {
      var s = document.createElement('script');
      s.async = true;
      s.type = 'text/javascript';
      s.src = '//' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] ||
       document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

  </body>
</html>